import './polyfills.server.mjs';
import{c as Dt}from"./chunk-NN37U6BV.mjs";import{$ as v,Aa as Ct,Da as ze,Ea as wt,Fa as Qe,H as u,I as p,Ka as j,L as qe,La as O,Ma as q,N as pt,Na as I,O as mt,P as x,Q as b,R as ft,S as gt,Sb as De,T as Ve,Tb as Se,U as h,Ub as Ie,V as _t,W as E,X as d,Xa as Mt,Y as c,Ya as Vt,Z as f,Zb as St,_ as N,a as me,aa as D,b as dt,ba as ge,c as ut,ca as vt,d as ht,da as oe,ea as se,f as J,fa as ae,g as k,ga as P,h as Ue,ha as _,hc as It,i as ne,ia as G,j as Y,ja as U,ka as W,kc as le,la as $,m as Me,ma as L,n as m,na as g,o as We,oa as yt,p as F,pa as H,qa as B,r as fe,s as M,t as V,u as K,ua as bt,v as re,x as $e,y as Z}from"./chunk-YJD4R3BK.mjs";import{a as S,b as ie}from"./chunk-VVCT4QZE.mjs";var xt=(()=>{let e=class e{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}};e.\u0275fac=function(n){return new(n||e)(p(qe),p($e))},e.\u0275dir=F({type:e});let i=e;return i})(),Nt=(()=>{let e=class e extends xt{};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=re(e)))(r||e)}})(),e.\u0275dir=F({type:e,features:[x]});let i=e;return i})(),Xe=new ne("");var gi={provide:Xe,useExisting:J(()=>z),multi:!0};function _i(){let i=Qe()?Qe().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var vi=new ne(""),z=(()=>{let e=class e extends xt{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!_i())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}};e.\u0275fac=function(n){return new(n||e)(p(qe),p($e),p(vi,8))},e.\u0275dir=F({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&v("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[L([gi]),x]});let i=e;return i})();function ye(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}var Pe=new ne(""),yi=new ne("");function bi(i){return e=>{if(ye(e.value)||ye(i))return null;let o=parseFloat(e.value);return!isNaN(o)&&o<i?{min:{min:i,actual:e.value}}:null}}function Ci(i){return e=>{if(ye(e.value)||ye(i))return null;let o=parseFloat(e.value);return!isNaN(o)&&o>i?{max:{max:i,actual:e.value}}:null}}function wi(i){return ye(i.value)?{required:!0}:null}function kt(i){return null}function Lt(i){return i!=null}function Ht(i){return bt(i)?dt(i):i}function Bt(i){let e={};return i.forEach(o=>{e=o!=null?S(S({},e),o):e}),Object.keys(e).length===0?null:e}function Rt(i,e){return e.map(o=>o(i))}function Mi(i){return!i.validate}function Gt(i){return i.map(e=>Mi(e)?e:o=>e.validate(o))}function Vi(i){if(!i)return null;let e=i.filter(Lt);return e.length==0?null:function(o){return Bt(Rt(o,e))}}function Ut(i){return i!=null?Vi(Gt(i)):null}function Di(i){if(!i)return null;let e=i.filter(Lt);return e.length==0?null:function(o){let t=Rt(o,e).map(Ht);return ht(t).pipe(ut(Bt))}}function Wt(i){return i!=null?Di(Gt(i)):null}function Et(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Si(i){return i._rawValidators}function Ii(i){return i._rawAsyncValidators}function Je(i){return i?Array.isArray(i)?i:[i]:[]}function Ee(i,e){return Array.isArray(i)?i.includes(e):i===e}function Tt(i,e){let o=Je(e);return Je(i).forEach(n=>{Ee(o,n)||o.push(n)}),o}function Pt(i,e){return Je(e).filter(o=>!Ee(i,o))}var Te=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ut(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Wt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,o){return this.control?this.control.hasError(e,o):!1}getError(e,o){return this.control?this.control.getError(e,o):null}},Ye=class extends Te{get formDirective(){return null}get path(){return null}},be=class extends Te{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ke=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ki={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qn=ie(S({},ki),{"[class.ng-submitted]":"isSubmitted"}),de=(()=>{let e=class e extends Ke{constructor(t){super(t)}};e.\u0275fac=function(n){return new(n||e)(p(be,2))},e.\u0275dir=F({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&E("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[x]});let i=e;return i})();var _e="VALID",ke="INVALID",ce="PENDING",ve="DISABLED";function Ei(i){return(je(i)?i.validators:i)||null}function Ti(i){return Array.isArray(i)?Ut(i):i||null}function Pi(i,e){return(je(e)?e.asyncValidators:i)||null}function ji(i){return Array.isArray(i)?Wt(i):i||null}function je(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}var Ze=class{constructor(e,o){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(o)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_e}get invalid(){return this.status===ke}get pending(){return this.status==ce}get disabled(){return this.status===ve}get enabled(){return this.status!==ve}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Tt(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Tt(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Pt(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Pt(e,this._rawAsyncValidators))}hasValidator(e){return Ee(this._rawValidators,e)}hasAsyncValidator(e){return Ee(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(o=>{o.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ce,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let o=this._parentMarkedDirty(e.onlySelf);this.status=ve,this.errors=null,this._forEachChild(t=>{t.disable(ie(S({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(S({},e),{skipPristineCheck:o})),this._onDisabledChange.forEach(t=>t(!0))}enable(e={}){let o=this._parentMarkedDirty(e.onlySelf);this.status=_e,this._forEachChild(t=>{t.enable(ie(S({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(S({},e),{skipPristineCheck:o})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_e||this.status===ce)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(o=>o._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ve:_e}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ce,this._hasOwnPendingAsyncValidator=!0;let o=Ht(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,o={}){this.errors=e,this._updateControlsErrors(o.emitEvent!==!1)}get(e){let o=e;return o==null||(Array.isArray(o)||(o=o.split(".")),o.length===0)?null:o.reduce((t,n)=>t&&t._find(n),this)}getError(e,o){let t=o?this.get(o):this;return t&&t.errors?t.errors[e]:null}hasError(e,o){return!!this.getError(e,o)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Z,this.statusChanges=new Z}_calculateStatus(){return this._allControlsDisabled()?ve:this.errors?ke:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ce)?ce:this._anyControlsHaveStatus(ke)?ke:_e}_anyControlsHaveStatus(e){return this._anyControls(o=>o.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){je(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let o=this._parent&&this._parent.dirty;return!e&&!!o&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Ti(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=ji(this._rawAsyncValidators)}};var $t=new ne("CallSetDisabledState",{providedIn:"root",factory:()=>et}),et="always";function Oi(i,e){return[...e.path,i]}function Fi(i,e,o=et){xi(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||o==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),Ni(i,e),Hi(i,e),Li(i,e),Ai(i,e)}function jt(i,e){i.forEach(o=>{o.registerOnValidatorChange&&o.registerOnValidatorChange(e)})}function Ai(i,e){if(e.valueAccessor.setDisabledState){let o=t=>{e.valueAccessor.setDisabledState(t)};i.registerOnDisabledChange(o),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(o)})}}function xi(i,e){let o=Si(i);e.validator!==null?i.setValidators(Et(o,e.validator)):typeof o=="function"&&i.setValidators([o]);let t=Ii(i);e.asyncValidator!==null?i.setAsyncValidators(Et(t,e.asyncValidator)):typeof t=="function"&&i.setAsyncValidators([t]);let n=()=>i.updateValueAndValidity();jt(e._rawValidators,n),jt(e._rawAsyncValidators,n)}function Ni(i,e){e.valueAccessor.registerOnChange(o=>{i._pendingValue=o,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&qt(i,e)})}function Li(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&qt(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function qt(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Hi(i,e){let o=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};i.registerOnChange(o),e._registerOnDestroy(()=>{i._unregisterOnChange(o)})}function Bi(i,e){if(!i.hasOwnProperty("model"))return!1;let o=i.model;return o.isFirstChange()?!0:!Object.is(e,o.currentValue)}function Ri(i){return Object.getPrototypeOf(i.constructor)===Nt}function Gi(i,e){if(!e)return null;Array.isArray(e);let o,t,n;return e.forEach(r=>{r.constructor===z?o=r:Ri(r)?t=r:n=r}),n||t||o||null}function Ot(i,e){let o=i.indexOf(e);o>-1&&i.splice(o,1)}function Ft(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Ui=class extends Ze{constructor(e=null,o,t){super(Ei(o),Pi(t,o)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(o),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),je(o)&&(o.nonNullable||o.initialValueIsDefault)&&(Ft(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,o={}){this.value=this._pendingValue=e,this._onChange.length&&o.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,o.emitViewToModelChange!==!1)),this.updateValueAndValidity(o)}patchValue(e,o={}){this.setValue(e,o)}reset(e=this.defaultValue,o={}){this._applyFormState(e),this.markAsPristine(o),this.markAsUntouched(o),this.setValue(this.value,o),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ot(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ot(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ft(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Wi={provide:be,useExisting:J(()=>X)},At=Promise.resolve(),X=(()=>{let e=class e extends be{constructor(t,n,r,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Ui,this._registered=!1,this.name="",this.update=new Z,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Gi(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Bi(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Fi(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){At.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,r=n!==0&&ze(n);At.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Oi(t,this._parent):[t]}};e.\u0275fac=function(n){return new(n||e)(p(Ye,9),p(Pe,10),p(yi,10),p(Xe,10),p(Ct,8),p($t,8))},e.\u0275dir=F({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Me.None,"disabled","isDisabled"],model:[Me.None,"ngModel","model"],options:[Me.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[L([Wi]),x,fe]});let i=e;return i})();var $i={provide:Xe,useExisting:J(()=>tt),multi:!0},tt=(()=>{let e=class e extends Nt{writeValue(t){let n=t??"";this.setProperty("value",n)}registerOnChange(t){this.onChange=n=>{t(n==""?null:parseFloat(n))}}};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=re(e)))(r||e)}})(),e.\u0275dir=F({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){n&1&&v("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[L([$i]),x]});let i=e;return i})();function zt(i){return typeof i=="number"?i:parseFloat(i)}var it=(()=>{let e=class e{constructor(){this._validator=kt}ngOnChanges(t){if(this.inputName in t){let n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):kt,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=F({type:e,features:[fe]});let i=e;return i})(),qi={provide:Pe,useExisting:J(()=>nt),multi:!0},nt=(()=>{let e=class e extends it{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>zt(t),this.createValidator=t=>Ci(t)}};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=re(e)))(r||e)}})(),e.\u0275dir=F({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Ve("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[L([qi]),x]});let i=e;return i})(),zi={provide:Pe,useExisting:J(()=>rt),multi:!0},rt=(()=>{let e=class e extends it{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>zt(t),this.createValidator=t=>bi(t)}};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=re(e)))(r||e)}})(),e.\u0275dir=F({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Ve("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[L([zi]),x]});let i=e;return i})(),Qi={provide:Pe,useExisting:J(()=>ot),multi:!0};var ot=(()=>{let e=class e extends it{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ze,this.createValidator=t=>wi}enabled(t){return t}};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=re(e)))(r||e)}})(),e.\u0275dir=F({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,r){n&2&&Ve("required",r._enabled?"":null)},inputs:{required:"required"},features:[L([Qi]),x]});let i=e;return i})();var Ji=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=We({type:e}),e.\u0275inj=Ue({});let i=e;return i})();var ue=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:$t,useValue:t.callSetDisabledState??et}]}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=We({type:e}),e.\u0275inj=Ue({imports:[Ji]});let i=e;return i})();function Yi(i,e){if(i&1){let o=N();d(0,"span",6),v("click",function(){M(o);let n=D(),r=P(5);return V(n.makeItemEditable(r))}),K(),d(1,"svg",7),f(2,"path",8),c()()}}function Ki(i,e){if(i&1){let o=N();d(0,"div",9),v("click",function(){M(o);let n=D();return V(n.contentClick())}),_(1),c()}if(i&2){let o=D();u(),G(o.content)}}function Zi(i,e){if(i&1){let o=N();d(0,"span",6),v("click",function(){M(o);let n=D(),r=P(5);return V(n.makeItemEditable(r))}),K(),d(1,"svg",7),f(2,"path",8),c()()}}var A=(()=>{let e=class e{constructor(){this.isButtonOnLeft=!1,this.itemEdited=new Z,this.contentClicked=new Z,this.itemEditable=!1,this.newContent=""}tryUpdate(){var t=this.newContent.trim();if(t.length<1||t==this.content){this.itemEditable=!1,this.newContent=this.content;return}this.itemEdited.emit(t),this.itemEditable=!1}ngAfterViewInit(){}inputChanged(t){t.blur()}contentClick(){this.contentClicked.emit()}makeItemEditable(t){this.itemEditable=!0,setTimeout(()=>{this.newContent=this.content,t.select()})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["pui-editable-item"]],inputs:{content:"content",isButtonOnLeft:"isButtonOnLeft"},outputs:{itemEdited:"itemEdited",contentClicked:"contentClicked"},standalone:!0,features:[g],decls:7,vars:8,consts:[["editableInput",""],[1,"editable_item"],["class","editable_item_edit_button",3,"click",4,"ngIf"],["class","editable_item_content",3,"click",4,"ngIf"],[1,"editable_item_input"],["type","text",3,"change","blur","ngModelChange","ngModel"],[1,"editable_item_edit_button",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-fill"],["d","M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"],[1,"editable_item_content",3,"click"]],template:function(n,r){if(n&1){let s=N();d(0,"div",1),b(1,Yi,3,0,"span",2)(2,Ki,2,1,"div",3),d(3,"div",4)(4,"input",5,0),v("change",function(){M(s);let l=P(5);return V(r.inputChanged(l))})("blur",function(){return M(s),V(r.tryUpdate())}),$("ngModelChange",function(l){return M(s),W(r.newContent,l)||(r.newContent=l),V(l)}),c()(),b(6,Zi,3,0,"span",2),c()}n&2&&(E("editable",r.itemEditable),u(),h("ngIf",!r.itemEditable&&r.isButtonOnLeft),u(),h("ngIf",!r.itemEditable),u(2),E("align_right",r.isButtonOnLeft),U("ngModel",r.newContent),u(2),h("ngIf",!r.itemEditable&&!r.isButtonOnLeft))},dependencies:[ue,z,de,X,O],styles:["[_nghost-%COMP%], .editable_item_input[_ngcontent-%COMP%]{width:100%}.editable_item[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;display:flex;justify-content:space-between;align-items:center}.editable_item.editable[_ngcontent-%COMP%]   .editable_item_content[_ngcontent-%COMP%], .editable_item[_ngcontent-%COMP%]:not(.editable)   .editable_item_input[_ngcontent-%COMP%]{display:none}.editable_item_content[_ngcontent-%COMP%], .editable_item_input[_ngcontent-%COMP%]{padding:0}.editable_item_input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:0;margin:0}.editable_item_edit_button[_ngcontent-%COMP%]{color:var(--whiteLayer2);opacity:0;visibility:hidden;cursor:pointer;transition:opacity .1s ease-out,visibility 0s linear .8s;margin-top:auto;margin-bottom:auto}.editable_item[_ngcontent-%COMP%]:hover   .editable_item_edit_button[_ngcontent-%COMP%]{opacity:1;visibility:visible;transition:.1s ease-out,opacity .4s ease-out .8s,visibility 0s linear .8s}.editable_item_edit_button[_ngcontent-%COMP%]:hover, .editable_item_edit_button[_ngcontent-%COMP%]:focus{color:var(--whiteLayer3)}.editable_item_edit_button[_ngcontent-%COMP%]:active{color:var(--fg-weak)}.align_right[_ngcontent-%COMP%]{text-align:right}.pending[_nghost-%COMP%]{color:var(--red)}.completed[_nghost-%COMP%]{color:var(--green)}"]});let i=e;return i})();var ee=function(i){return i[i.TaskLogs=0]="TaskLogs",i[i.Habits=1]="Habits",i[i.Export=2]="Export",i[i.Projects=3]="Projects",i}(ee||{});var R=function(i){return i[i.WONT_DO=0]="WONT_DO",i[i.PENDING=1]="PENDING",i[i.IN_PROGRESS=2]="IN_PROGRESS",i[i.NEED_INFO=3]="NEED_INFO",i[i.COMPLETED=4]="COMPLETED",i[i.WAITING=5]="WAITING",i}(R||{});var Q=function(i){return i.foldedProjects_1_0_0="foldedProjects",i.foldedProjects_2_1_0="key_project_fold_2_0_0",i.browserDataStorage_0_0_0="bds_000",i}(Q||{});var Oe=(()=>{let e=class e{comsCheck(t=!0){var n=!1;try{window.comms&&(n=!0)}finally{return t||console.log(n?"Electron found":"Electron not found"),n}}loadData(){return this.comsCheck()?window.comms.loadData():new Promise((t,n)=>n())}exportData(t){if(this.comsCheck())return window.comms.exportData(t)}newTask(t){if(this.comsCheck())return window.comms.newTask(t)}toggleTask(t,n,r){if(this.comsCheck())return window.comms.toggleTask(t,n,r)}editTask(t){if(this.comsCheck())return window.comms.editTask(t)}editProject(t){if(this.comsCheck())return window.comms.editProject(t)}newHabit(t){if(this.comsCheck())return window.comms.newHabit(t)}editHabit(t){if(this.comsCheck())return window.comms.editHabit(t)}habitDone(t,n){if(this.comsCheck())return window.comms.habitDone(t,n)}deleteHabit(t){}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Fe=class{constructor(e,o,t){this.id=e,this.habitId=o,this.dateTime=t}};var Ae=class{constructor(e,o,t){this.id=e,this.name=o,this.tasks=t}};var Ce=class{constructor(e,o,t,n){this.id=e,this.taskId=o,this.statusId=t,this.dateTime=n}};var xe=class{constructor(e,o,t,n){this.id=e,this.projectId=o,this.parentId=t,this.summary=n}};var te=class{constructor(e,o,t,n,r,s){this.tasks=e,this.taskLogs=o,this.projects=t,this.habits=n,this.habitLogs=r,this.appVersion=s}};var Ne=(()=>{let e=class e{constructor(){pt(()=>{this.localStorage=localStorage})}setItem(t,n){let r=JSON.stringify(n);this.localStorage?.setItem(t,r)}getItem(t){let n=this.localStorage?.getItem(t);return n?JSON.parse(n):null}removeItem(t){this.localStorage?.removeItem(t)}clear(){this.localStorage?.clear()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Le=class{constructor(){this.lsVersion="Lite",this.previousVersion=void 0}read(e){if(!Object.hasOwn(e,"tasks")||!Object.hasOwn(e,"taskLogs")||!Object.hasOwn(e,"projects")||!Object.hasOwn(e,"habits")||!Object.hasOwn(e,"habitLogs")||!Object.hasOwn(e,"lsVersion"))throw Error("Corrupt Data received");var o=new te(e.tasks,e.taskLogs,e.projects,e.habits,e.habitLogs,this.lsVersion);return o}setup(){return new te([],[],[],[],[],this.lsVersion)}getExportableData(e){var o={tasks:e.tasks,taskLogs:e.taskLogs,projects:e.projects,habits:e.habits,habitLogs:e.habitLogs,lsVersion:this.lsVersion};return o}isMatch(e){return this.lsVersion===e}};var Yt=(()=>{let e=class e{constructor(){this.versions=[new Le]}read(t){var n=t.lsVersion,r=this.getVersionFromString(n);return r.read(t)}getVersionFromString(t){var n=this.versions.findIndex(r=>r.isMatch(t));if(n==-1)throw Error("unrecognized Version"+t);return this.versions[n]}getLatestVersion(){return this.versions[this.versions.length-1]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Kt=(()=>{let e=class e{constructor(t,n){this.tasks=new Map,this.taskLogs=new Map,this.projects=new Map,this.habits=new Map,this.habitLogs=new Map,this.lastId_tasks=-1,this.lastId_taskLogs=-1,this.lastId_projects=-1,this.lastId_habits=-1,this.lastId_habitLogs=-1,this.appVersion="Lite",this.LS=t,this.LSVersionService=n}dumpToLocalStorage(){var t=new te(Array.from(this.tasks.values()),Array.from(this.taskLogs.values()),Array.from(this.projects.values()),Array.from(this.habits.values()),Array.from(this.habitLogs.values()),this.appVersion),n=this.LSVersionService.getLatestVersion().getExportableData(t);this.LS.setItem(Q.browserDataStorage_0_0_0,n)}loadData(){return new Promise((t,n)=>{try{var r=this.LS.getItem(Q.browserDataStorage_0_0_0);if(r){var a=this.LSVersionService.getVersionFromString(r.lsVersion).read(r);this.replaceData(a),t(a);return}else{var s=this.LSVersionService.getLatestVersion(),a=s.setup();t(a);return}}catch{n("Browser Data failed to load")}})}replaceData(t){t.tasks.forEach(n=>{this.tasks.set(n.id,n)}),t.taskLogs.forEach(n=>{this.taskLogs.set(n.id,n)}),t.projects.forEach(n=>{this.projects.set(n.id,n)}),t.habits.forEach(n=>{this.habits.set(n.id,n)}),t.habitLogs.forEach(n=>{this.habitLogs.set(n.id,n)}),this.lastId_tasks=this.findLastIndex(this.tasks),this.lastId_taskLogs=this.findLastIndex(this.taskLogs),this.lastId_projects=this.findLastIndex(this.projects),this.lastId_habits=this.findLastIndex(this.habits),this.lastId_habitLogs=this.findLastIndex(this.habitLogs)}findLastIndex(t){var n=-1;return t.forEach((r,s)=>{s>n&&(n=s)}),n}createProject(t){let n=new Ae(++this.lastId_projects,t,[]);return this.projects.set(n.id,n),n}getProjectByName(t){let n=[...this.projects.values()].filter(r=>r.name==t);return n.length>0?n[0]:!1}getProjectByNameOrCreate(t){let n=this.getProjectByName(t);return n||this.createProject(t)}updateProject(t){return this.projects.has(t.id)?(this.projects.set(t.id,t),!0):!1}createTask(t,n,r){let s=new xe(++this.lastId_tasks,n,r,t);return this.tasks.set(s.id,s),s}getAllTasksOfProject(t){let n=[...this.tasks.values()].filter(r=>r.projectId==t);return n.length>0?n:!1}updateTask(t){return this.tasks.has(t.id)?(this.tasks.set(t.id,t),!0):!1}createHabit(t){return t.id=++this.lastId_habits,this.habits.set(t.id,t),t}updateHabit(t){return this.habits.has(t.id)?(this.habits.set(t.id,t),!0):!1}createTaskLog(t){return t.id=++this.lastId_taskLogs,this.taskLogs.set(t.id,t),t}createHabitLog(t){t.id=++this.lastId_habitLogs,this.habitLogs.set(t.id,t);let n=this.habits.get(t.habitId);return n.lastLogTime=t.dateTime,this.habits.set(n.id,n),t}newTask(t){return new Promise((n,r)=>{t.dateTime=new Date(t.dateTime).getTime(),t.project=t.project.trim(),t.summary=t.summary.trim();let s=this.getProjectByNameOrCreate(t.project),a=this.createTask(t.summary,s.id,-1),l=new Ce(-1,a.id,R.PENDING,t.dateTime),C=this.createTaskLog(l);this.dumpToLocalStorage(),n(s&&a&&C?{task:a,log:C,project:s}:!1)})}editTask(t){return new Promise((n,r)=>{let s=this.updateTask(t);this.dumpToLocalStorage(),n(s)})}toggleTask(t,n,r){return new Promise((s,a)=>{let l=new Ce(-1,t,n,new Date(r).getTime()),C=this.createTaskLog(l);this.dumpToLocalStorage(),s(C)})}newHabit(t){return new Promise((n,r)=>{(t.days>7||t.days<1||t.name.length<=0)&&n(!1),t.endTime=new Date(t.endTime).getTime(),t.lastLogTime=new Date(t.lastLogTime).getTime(),t.startTime=new Date(t.startTime).getTime();let s=this.createHabit(t);this.dumpToLocalStorage(),n(s)})}editHabit(t){return new Promise((n,r)=>{let s=this.updateHabit(t);this.dumpToLocalStorage(),n(s?t:!1)})}habitDone(t,n){return new Promise((r,s)=>{let a=this.habits.get(t),l=new Date(a.lastLogTime),C=new Date;if(C.getFullYear()==l.getFullYear()&&C.getMonth()==l.getMonth()&&C.getDate()==l.getDate())throw Error("Already Logged Habit for the day");{let we=new Fe(-1,t,n),pe=this.createHabitLog(we);return console.log("habitDone",pe),this.dumpToLocalStorage(),pe??!1}})}deleteHabit(t){throw new Error("Method not implemented.")}editProject(t){return new Promise((n,r)=>{this.getProjectByName(t.name)&&n(!1);let a=this.updateProject(t);this.dumpToLocalStorage(),n(a)})}exportData(t){throw new Error("Method not implemented.")}};e.\u0275fac=function(n){return new(n||e)(Y(Ne),Y(Yt))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var y=(()=>{let e=class e{constructor(t,n,r){this.foldedProjects=new Map,this.defaultTab=ee.TaskLogs,this.dataProfile=!0,this.idleTolerance=500,this.tasks=new Map,this.habits=new Map,this.projects=new Map,this.logs=new Map,this.habitLogs=new Map,this.logTree=new Map,this.orderredTree=[],this.projectTree=new Map,this.stateChanged=new me,this.stateChanged$=this.stateChanged.asObservable(),this.loadPercent=new me,this.loading$=this.loadPercent.asObservable(),this.localStorage=r,t.comsCheck(!1)?this.comService=t:this.comService=n}notifyStateChange(){this.stateChanged.next(this)}getLogTreeAsOrderredList(){return this.orderredTree}getProjectTree(){return this.projectTree}growTrees(){this.orderredTree=[];var t=new Map,n=[...this.logs.values()];n.forEach(s=>{let a=this._getDateStr(new Date(s.dateTime)),l=this.tasks.get(s.taskId),C=this.projects.get(l.projectId);this.logTree.has(a)||this.logTree.set(a,new Map),this.logTree.get(a)?.has(C.id)||this.logTree.get(a)?.set(C.id,new Map),this.logTree.get(a)?.get(l.projectId)?.set(l.id,s),this._populateOrderredTree(a,this.logTree.get(a)),s.statusId==R.PENDING?t.set(l,s):t.delete(l),this.projectTree.has(C.id)||this.projectTree.set(C.id,new Map),this.projectTree.get(C.id)?.set(l.id,s.statusId)});let r=this._getDateStr(new Date);t.forEach((s,a)=>{this.logTree.has(r)||this.logTree.set(r,new Map),this.logTree.get(r)?.has(a.projectId)||this.logTree.get(r)?.set(a.projectId,new Map),this.logTree.get(r)?.get(a.projectId)?.set(a.id,s),this._populateOrderredTree(r,this.logTree.get(r))})}_getDateStr(t){let n=t.getFullYear(),r=t.getMonth(),s=t.getDate();return`${n},${r},${s}`}_populateOrderredTree(t,n){if(this.orderredTree.length<=0){this.orderredTree.push([t,n]);return}this.orderredTree[this.orderredTree.length-1][0]!=t?this.orderredTree.push([t,n]):this.orderredTree[this.orderredTree.length-1][1]=n}logsExist(){return this.logs.size>0}toggleFold(t){var n=this.foldedProjects.get(t)??!1;this.foldedProjects.set(t,!n);var r=JSON.stringify(Array.from(this.foldedProjects.entries()));return localStorage.setItem(Q.foldedProjects_2_1_0,r),!n}getTask(t){return this.tasks.get(t)}newTask(t){this.comService.newTask(t).then(n=>{if(n==!1){console.error("invalid data");return}this.tasks.set(n.task.id,n.task),this.projects.set(n.project.id,n.project),this.logs.set(n.log.id,n.log),this.growTrees(),this.notifyStateChange()},n=>{console.error("server error while adding new task")})}toggleTask(t,n,r){this.comService.toggleTask(t,n,r).then(s=>{if(s==!1){console.error("invalid data");return}s=s,this.logs.set(s.id,s);let a=this.logTree.get(this._getDateStr(new Date)),l=this.tasks.get(t),C=this.projects.get(l.projectId);a?.get(C.id).set(l.id,s),this.orderredTree[this.orderredTree.length-1][1].get(C.id).set(l.id,s),this.notifyStateChange()},s=>{console.error("server error while updating task")})}editTask(t){this.comService.editTask(t).then(n=>{if(n==!1){console.error("Something went wrong while editing task");return}else this.tasks.set(t.id,t),this.notifyStateChange()},n=>{console.error("Unable to edit Task due to an internal error")})}getProject(t){return this.projects.get(t)}editProject(t){this.comService.editProject(t).then(n=>{if(n==!1){console.error("Something went wrong while editing project");return}else this.projects.set(t.id,t),this.notifyStateChange()},n=>{console.error("Unable to edit Project due to an internal error")})}getHabit(t){return this.habits.get(t)}newHabit(t,n,r=Date.now(),s=1/0){var a={id:-1,name:t,days:n,startTime:r,endTime:s};this.comService.newHabit(a).then(l=>{if(l==!1){console.error("Habit create invalid");return}else l=l,this.habits.set(l.id,l),this.notifyStateChange()},l=>{console.error("server errored while adding habit",l)})}editHabit(t){this.comService.editHabit(t).then(n=>{if(n==!1){console.error("Habit edit invalid");return}else n=n,this.habits.set(n.id,n),this.notifyStateChange()},n=>{console.error("server errored while editing habit",n)})}markHabitDone(t){this.comService.habitDone(t.id,Date.now()).then(n=>{if(n==!1){console.error("Unable to mark Habit as done due to some error");return}else n=n,this.habitLogs.set(n.id,n),this.habits.get(n.habitId).lastLogTime=n.dateTime,this.notifyStateChange()},n=>{console.error("server error while updating habit",n)})}getHabitsDueOn(t){var n=new Map;for(let[s,a]of this.habits){var r=new Date(a.lastLogTime);r.getFullYear()!=t.getFullYear()||r.getMonth()!=t.getMonth()||r.getDate()!=t.getDate()?n.set(s,a):n.delete(s)}return n}loadData(){this.loadPercent.next(10),this.comService.loadData().then(t=>{if(t==!1){this.replaceData(),this.loadPercent.next(100);return}else{console.log("data received from db"),this.loadPercent.next(33),this.replaceData(t.tasks,t.taskLogs,t.projects,t.habits,t.habitLogs,t.appVersion),this.loadPercent.next(66);try{let n=JSON.parse(this.localStorage.getItem(Q.foldedProjects_2_1_0)??"[]"),r=new Map(n);this.foldedProjects=r,this.loadPercent.next(82)}catch{console.log("folded Projects were unreadable, reverting to default."),this.localStorage.removeItem(Q.foldedProjects_2_1_0),this.foldedProjects=new Map,this.loadPercent.next(95)}finally{this.loadPercent.next(100)}}}).catch(t=>{console.error("server error while loading data"),this.replaceData(),this.loadPercent.next(100)})}replaceData(t=[],n=[],r=[],s=[],a=[],l=""){this.appVersion=l,this.logs=new Map,this.tasks=new Map,this.habits=new Map,this.projects=new Map,this.habitLogs=new Map;for(var C of n)this.logs.set(C.id,C);for(var we of t)this.tasks.set(we.id,we);for(var pe of s)this.habits.set(pe.id,pe);for(var lt of r)this.projects.set(lt.id,lt);for(var ct of a)this.habitLogs.set(ct.id,ct);this.growTrees(),this.notifyStateChange()}exportData(){return this.comService.exportData(this.logTree)}};e.\u0275fac=function(n){return new(n||e)(Y(Oe),Y(Kt),Y(Ne))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Zt=(()=>{let e=class e{constructor(t){this.today=new Date,this.uiStateService=t}ngOnInit(){this.today=new Date}editHabit(t){var n=this.habit;n.name=t,this.uiStateService.editHabit(n)}};e.\u0275fac=function(n){return new(n||e)(p(y))},e.\u0275cmp=m({type:e,selectors:[["pui-habit-item"]],inputs:{habitId:"habitId",habit:"habit"},standalone:!0,features:[g],decls:2,vars:1,consts:[[1,"habit_item"],[3,"itemEdited","content"]],template:function(n,r){n&1&&(d(0,"li",0)(1,"pui-editable-item",1),v("itemEdited",function(a){return r.editHabit(a)}),c()()),n&2&&(u(),h("content",r.habit.name))},dependencies:[A],styles:[".habit_item[_ngcontent-%COMP%]{border:1px solid var(--whiteLayer1);margin-bottom:1rem;margin-top:1rem;padding:.5em 1em;transition:.5s ease-out;border-radius:.5em;display:flex;justify-content:space-between;font-size:1.5em}.habit_item[_ngcontent-%COMP%]:hover{border:1px solid var(--whiteLayer2)}"]});let i=e;return i})();var Xt=(()=>{let e=class e{constructor(t){this.uiStateService=t}newHabit(t){!this.newHabitName||!this.newHabitFrequency||this.newHabitName.length<1||this.newHabitFrequency<1||this.newHabitFrequency>7||(this.uiStateService.newHabit(this.newHabitName,this.newHabitFrequency),this.newHabitName=this.newHabitFrequency=void 0,t.blur())}};e.\u0275fac=function(n){return new(n||e)(p(y))},e.\u0275cmp=m({type:e,selectors:[["pui-new-habit-section"]],standalone:!0,features:[g],decls:7,vars:2,consts:[["newHabitNameInput",""],["newHabitFrequencyInput",""],[1,"new_habit_item"],["type","text","placeholder","I want to ... ?",1,"newHabitTitle",3,"ngModelChange","change","ngModel"],[1,"newHabitFrequencyContainer"],["type","number","min","1","max","7","placeholder","x",1,"new_habit_frequency",3,"ngModelChange","change","ngModel"]],template:function(n,r){if(n&1){let s=N();d(0,"li",2)(1,"input",3,0),$("ngModelChange",function(l){return M(s),W(r.newHabitName,l)||(r.newHabitName=l),V(l)}),v("change",function(){M(s);let l=P(2);return V(r.newHabit(l))}),c(),d(3,"div",4)(4,"input",5,1),$("ngModelChange",function(l){return M(s),W(r.newHabitFrequency,l)||(r.newHabitFrequency=l),V(l)}),v("change",function(){M(s);let l=P(5);return V(r.newHabit(l))}),c(),_(6," days a week "),c()()}n&2&&(u(),U("ngModel",r.newHabitName),u(3),U("ngModel",r.newHabitFrequency))},dependencies:[ue,z,tt,de,rt,nt,X],styles:[".new_habit_item[_ngcontent-%COMP%]{border:1px solid var(--whiteLayer1);margin-bottom:1em;padding:.5em 1em;transition:.5s ease-out;border-radius:.5em;display:flex;justify-content:space-between;flex-direction:column}.new_habit_item[_ngcontent-%COMP%]:hover{border:1px solid var(--whiteLayer2)}input.new_habit_frequency[_ngcontent-%COMP%]{width:2em;margin-right:1em;text-align:right}"]});let i=e;return i})();var ei=(()=>{let e=class e{constructor(t){this.uiStateService=t}habitLog(){this.uiStateService.markHabitDone(this.habit)}};e.\u0275fac=function(n){return new(n||e)(p(y))},e.\u0275cmp=m({type:e,selectors:[["pui-due-habit-item"]],inputs:{habitId:"habitId",habit:"habit"},standalone:!0,features:[g],decls:2,vars:1,consts:[[1,"due_habit_item",3,"click"]],template:function(n,r){n&1&&(d(0,"li",0),v("click",function(){return r.habitLog()}),_(1),c()),n&2&&(u(),G(r.habit.name))},styles:[".due_habit_item[_ngcontent-%COMP%]{border:1px solid var(--whiteLayer1);margin-bottom:1rem;margin-top:1rem;padding:.5em 1em;transition:.5s ease-out;border-radius:.5em;display:flex;justify-content:space-between;font-size:1.5em;cursor:pointer;background-color:var(--whiteLayer1)}.due_habit_item[_ngcontent-%COMP%]:hover{border:1px solid var(--whiteLayer2);background-color:var(--whiteLayer2)}.due_habit_item[_ngcontent-%COMP%]:active{border:1px solid var(--fg);transition:.1s}"]});let i=e;return i})();function tn(i,e){i&1&&(d(0,"h2"),_(1,"Due Today"),c())}function nn(i,e){if(i&1&&f(0,"pui-due-habit-item",7),i&2){let o=e.$implicit;h("habitId",o.key)("habit",o.value)}}function rn(i,e){if(i&1&&(d(0,"ul",6),b(1,nn,1,2,"pui-due-habit-item",5),H(2,"keyvalue"),c()),i&2){let o=D();u(),h("ngForOf",B(2,1,o.dueHabits))}}function on(i,e){i&1&&f(0,"hr")}function sn(i,e){if(i&1&&f(0,"pui-habit-item",7),i&2){let o=e.$implicit;h("habitId",o.key)("habit",o.value)}}var ti=(()=>{let e=class e{constructor(t){this.uiStateService=t,this.dueHabits=this.uiStateService.getHabitsDueOn(new Date)}ngDoCheck(){console.log("too freq"),this.dueHabits=this.uiStateService.getHabitsDueOn(new Date)}};e.\u0275fac=function(n){return new(n||e)(p(y))},e.\u0275cmp=m({type:e,selectors:[["pui-tabs-habit"]],standalone:!0,features:[g],decls:11,vars:6,consts:[[1,"menu_tab","habitTab"],[1,"container"],[4,"ngIf"],["class","pending_habits",4,"ngIf"],[1,"habit_list"],[3,"habitId","habit",4,"ngFor","ngForOf"],[1,"pending_habits"],[3,"habitId","habit"]],template:function(n,r){n&1&&(d(0,"div",0)(1,"main",1)(2,"h1"),_(3,"HABITS"),c(),b(4,tn,2,0,"h2",2)(5,rn,3,3,"ul",3)(6,on,1,0,"hr",2),d(7,"ul",4),b(8,sn,1,2,"pui-habit-item",5),H(9,"keyvalue"),c(),f(10,"pui-new-habit-section"),c()()),n&2&&(u(4),h("ngIf",r.dueHabits.size>0),u(),h("ngIf",r.dueHabits.size>0),u(),h("ngIf",r.dueHabits.size>0),u(2),h("ngForOf",B(9,4,r.uiStateService.habits)))},dependencies:[j,I,O,q,Zt,ei,Xt],styles:[".habit_list[_ngcontent-%COMP%], .pending_habits[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}"]});let i=e;return i})();var Be=class{constructor(e,o,t,n){this.id=e,this.dateTime=o,this.project=t,this.summary=n}};var he=(()=>{let e=class e{constructor(){this.requestedProjectName=new me,this.autoTypeRequested$=this.requestedProjectName.asObservable()}requestAutoType(t){this.requestedProjectName.next(t)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac});let i=e;return i})();var an=["newLogTask"],ni=(()=>{let e=class e{constructor(t,n,r){this.logsExist=!1,this.newProjectValue="",this.newTaskValue="",this.uiStateService=t,this.eComService=n,this.autoTypeListener=r.autoTypeRequested$.subscribe(s=>{this.autoTypeProject(s)})}trimInput(t){t.value=t.value.trimStart()}newTask(t){if(!(!this.newTaskValue||!this.newProjectValue)){this.newTaskValue=this.newTaskValue.trim(),this.newProjectValue=this.newProjectValue.trim();var n=new Be(-1,new Date().getTime(),this.newProjectValue,this.newTaskValue);this.uiStateService.newTask(n),this.newProjectValue="",this.newTaskValue="",t.blur()}}autoTypeProject(t,n=0){if(n==0&&(this.newProjectValue=""),n>=t.length){this.newTaskInput.nativeElement.focus();return}this.newProjectValue+=t[n],setTimeout(()=>{this.autoTypeProject(t,n+1)},25)}};e.\u0275fac=function(n){return new(n||e)(p(y),p(Oe),p(he))},e.\u0275cmp=m({type:e,selectors:[["pui-new-log-section"]],viewQuery:function(n,r){if(n&1&&oe(an,5),n&2){let s;se(s=ae())&&(r.newTaskInput=s.first)}},inputs:{logsExist:"logsExist"},standalone:!0,features:[g],decls:13,vars:4,consts:[["inputsArea",""],["newLogProject",""],["newLogTask",""],["id","inputs",1,"log_day","header","inputs"],[1,"log_date"],[1,"days_projects"],[1,"project_row"],[1,"project_column"],["type","text","name","Project","id","newLogProject","required","","title","Parent Task/Project",3,"ngModelChange","input","change","placeholder","ngModel"],[1,"projects_tasks"],[1,"log_task"],["type","text","name","Task","id","newLogTask","title","Task",3,"ngModelChange","input","change","placeholder","ngModel"]],template:function(n,r){if(n&1){let s=N();d(0,"div",3,0),f(2,"div",4),d(3,"div",5)(4,"div",6)(5,"div",7)(6,"div")(7,"input",8,1),$("ngModelChange",function(l){return M(s),W(r.newProjectValue,l)||(r.newProjectValue=l),V(l)}),v("input",function(){M(s);let l=P(8);return V(r.trimInput(l))})("change",function(){M(s);let l=P(8);return V(r.newTask(l))}),c()()(),d(9,"div",9)(10,"div",10)(11,"input",11,2),$("ngModelChange",function(l){return M(s),W(r.newTaskValue,l)||(r.newTaskValue=l),V(l)}),v("input",function(){M(s);let l=P(12);return V(r.trimInput(l))})("change",function(){M(s);let l=P(12);return V(r.newTask(l))}),c()()()()()()}n&2&&(u(7),ge("placeholder",r.logsExist?"":"Add a New Project"),U("ngModel",r.newProjectValue),u(4),ge("placeholder",r.logsExist?"":"with a new task"),U("ngModel",r.newTaskValue))},dependencies:[ue,z,de,ot,X],styles:[".log_day[_ngcontent-%COMP%]{width:100%;display:flex;border-bottom:1px solid var(--whiteLayer1);padding:.5em 0}.header[_ngcontent-%COMP%]{border-bottom:2px solid var(--whiteLayer1)!important;font-weight:700;position:sticky;top:0;background-color:var(--bg);z-index:5}.log_date[_ngcontent-%COMP%]{width:15%}.days_projects[_ngcontent-%COMP%]{width:85%;display:flex;flex-direction:column}.project_row[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;border-radius:.5em;transition:.1s linear}.project_column[_ngcontent-%COMP%]{width:41.1355%;text-align:right;padding:0 .5em}.projects_tasks[_ngcontent-%COMP%]{width:58.82%}.log_task[_ngcontent-%COMP%]{width:100%;transition:.2s ease-out;border-radius:.5em;padding:0 .5em}#inputs[_ngcontent-%COMP%]{padding:0!important;border:none!important}.project_column[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:right}"]});let i=e;return i})();var ri=(()=>{let e=class e{constructor(t){this.highlightedTask=-1,this.itIsToday=!1,this.uiStateService=t,this.stateObserver=this.uiStateService.stateChanged$.subscribe(n=>{this.uiStateService=n,this.task=this.uiStateService.getTask(this.taskId)})}ngOnInit(){this.task=this.uiStateService.getTask(this.taskId),this.taskStatus=this.taskLog.statusId}taskClick(){let t=Date.now();var n=this.taskLog.statusId==R.PENDING?R.COMPLETED:R.PENDING;this.itIsToday&&this.uiStateService.toggleTask(this.taskLog.taskId,n,t)}taskEdit(t){var n=S({},this.task);n.summary=t,this.uiStateService.editTask(n)}};e.\u0275fac=function(n){return new(n||e)(p(y))},e.\u0275cmp=m({type:e,selectors:[["pui-task-row"]],inputs:{taskId:"taskId",taskLog:"taskLog",highlightedTask:"highlightedTask",itIsToday:"itIsToday"},standalone:!0,features:[g],decls:1,vars:9,consts:[[3,"contentClicked","itemEdited","content","id"]],template:function(n,r){if(n&1&&(d(0,"pui-editable-item",0),v("contentClicked",function(){return r.taskClick()})("itemEdited",function(a){return r.taskEdit(a)}),c()),n&2){let s;E("pending",r.taskStatus==1)("completed",r.taskStatus==4)("flashed_task",r.highlightedTask==(r.task==null?null:r.task.id)),vt("id","task_row_",r.taskId,""),h("content",(s=r.task==null?null:r.task.summary)!==null&&s!==void 0?s:"ERROR")}},dependencies:[A],styles:[".editable_item:hover,   .editable_item:focus-within{background-color:var(--blackLayer1);transition-delay:.2s}  .editable_item{width:100%;transition:.2s ease-out;border-radius:.5em;padding:0 .5em}  .today .editable_item_content{cursor:pointer}  .flashed_task .editable_item{background-color:var(--whiteLayer1)}"]});let i=e;return i})();function ln(i,e){if(i&1&&f(0,"pui-task-row",5),i&2){let o=e.$implicit,t=D();h("taskId",o.key)("taskLog",o.value)("highlightedTask",t.highlightedTask)("itIsToday",t.itIsToday)}}var oi=(()=>{let e=class e{constructor(t,n){this.highlightedTask=-1,this.itIsToday=!1,this.uiStateService=t,this.projectAutoTypeService=n,this.stateObserver=this.uiStateService.stateChanged$.subscribe(r=>{this.uiStateService=r,this.project=this.uiStateService.getProject(this.projectId)})}ngOnInit(){this.project=this.uiStateService.getProject(this.projectId)}autoTypeProject(){this.projectAutoTypeService.requestAutoType(this.project?.name??"")}editProject(t){var n=S({},this.project);n.name=t,this.uiStateService.editProject(n)}};e.\u0275fac=function(n){return new(n||e)(p(y),p(he))},e.\u0275cmp=m({type:e,selectors:[["pui-project-row"]],inputs:{projectId:"projectId",tree:"tree",highlightedTask:"highlightedTask",itIsToday:"itIsToday"},standalone:!0,features:[g],decls:6,vars:5,consts:[[1,"project_row"],[1,"project_column"],[1,"sticky_project_stuff",3,"contentClicked","itemEdited","content","isButtonOnLeft"],[1,"projects_tasks"],[3,"taskId","taskLog","highlightedTask","itIsToday",4,"ngFor","ngForOf"],[3,"taskId","taskLog","highlightedTask","itIsToday"]],template:function(n,r){if(n&1&&(d(0,"div",0)(1,"div",1)(2,"pui-editable-item",2),v("contentClicked",function(){return r.autoTypeProject()})("itemEdited",function(a){return r.editProject(a)}),c()(),d(3,"div",3),b(4,ln,1,4,"pui-task-row",4),H(5,"keyvalue"),c()()),n&2){let s;u(2),h("content",(s=r.project==null?null:r.project.name)!==null&&s!==void 0?s:"ERROR")("isButtonOnLeft",!0),u(2),h("ngForOf",B(5,3,r.tree))}},dependencies:[ri,I,j,q,A],styles:[".project_row[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;border-radius:.5em;transition:.1s linear}.project_column[_ngcontent-%COMP%]{width:41.1355%;text-align:right}  .project_column .editable_item_content{cursor:pointer}.project_column[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:right}.sticky_project_stuff[_ngcontent-%COMP%]{position:sticky;top:3em}.projects_tasks[_ngcontent-%COMP%]{width:58.82%}"]});let i=e;return i})();function cn(i,e){if(i&1&&f(0,"pui-project-row",5),i&2){let o=e.$implicit,t=D();h("projectId",o.key)("tree",o.value)("highlightedTask",t.highlightedTask)("itIsToday",t.itIsToday)}}var si=(()=>{let e=class e{constructor(){this.logDay="",this.tree=new Map,this.highlightedTask=-1,this.itIsToday=!1,this.id=0,this.displayDate=""}ngOnInit(){let[t,n,r]=this.logDay.split(",").map(C=>Number.parseInt(C,10)),s=new Date(t,n,r),a=new Date().toDateString()==s.toDateString(),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.id=s.getTime(),this.itIsToday=a,this.displayDate=a?"Today":`${t} ${l[n]} ${r}`}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["pui-log-day"]],inputs:{logDay:"logDay",tree:"tree",highlightedTask:"highlightedTask"},standalone:!0,features:[g],decls:7,vars:7,consts:[[1,"log_day",3,"id"],[1,"log_date"],[1,"sticky_date"],[1,"days_projects"],[3,"projectId","tree","highlightedTask","itIsToday",4,"ngFor","ngForOf"],[3,"projectId","tree","highlightedTask","itIsToday"]],template:function(n,r){n&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),_(3),c()(),d(4,"div",3),b(5,cn,1,4,"pui-project-row",4),H(6,"keyvalue"),c()()),n&2&&(E("today",r.itIsToday),ge("id",r.id),u(3),G(r.displayDate),u(2),h("ngForOf",B(6,5,r.tree)))},dependencies:[oi,I,j,q],styles:[".log_day[_ngcontent-%COMP%]{width:100%;display:flex;border-bottom:1px solid var(--whiteLayer1);padding:.5em 0}.log_day.today[_ngcontent-%COMP%]{border-bottom:none}.log_date[_ngcontent-%COMP%]{width:15%}.sticky_date[_ngcontent-%COMP%]{position:sticky;top:3em}.days_projects[_ngcontent-%COMP%]{width:85%;display:flex;flex-direction:column}"]});let i=e;return i})();var dn=["scrollAnchor"];function un(i,e){if(i&1&&f(0,"pui-log-day",12),i&2){let o=e.$implicit,t=D();h("logDay",o[0])("tree",o[1])("highlightedTask",t.highlightedTask)}}var ai=(()=>{let e=class e{constructor(t,n){this.highlightedTask=-1,this.uiStateService=t,this.router=n}ngOnInit(){this.task&&this.flashTask(this.task),this.scrollIntoView(this.task??0)}scrollIntoView(t){setTimeout(()=>{t==0?this.scrollAnchor.nativeElement.scrollIntoView({behavior:"smooth"}):document.getElementById("task_row_"+t)?.scrollIntoView({behavior:"smooth"})})}flashTask(t){this.highlightedTask=t,setTimeout(()=>{this.highlightedTask=-1},5e3)}};e.\u0275fac=function(n){return new(n||e)(p(y),p(De))},e.\u0275cmp=m({type:e,selectors:[["pui-tabs-log"]],viewQuery:function(n,r){if(n&1&&oe(dn,5),n&2){let s;se(s=ae())&&(r.scrollAnchor=s.first)}},inputs:{task:"task"},standalone:!0,features:[L([he]),g],decls:18,vars:2,consts:[["scrollAnchor",""],[1,"menu_tab","log_chart"],[1,"container"],[1,"log_day","header"],[1,"log_date"],[1,"days_projects"],[1,"project_row"],[1,"project_column"],[1,"projects_tasks"],[1,"log_task"],[3,"logDay","tree","highlightedTask",4,"ngFor","ngForOf"],[3,"logsExist"],[3,"logDay","tree","highlightedTask"]],template:function(n,r){n&1&&(d(0,"div",1)(1,"main",2)(2,"h1"),_(3,"LOGS"),c(),d(4,"div",3)(5,"div",4),_(6,"Date"),c(),d(7,"div",5)(8,"div",6)(9,"div",7),_(10,"Project"),c(),d(11,"div",8)(12,"div",9),_(13,"Task"),c()()()()(),b(14,un,1,3,"pui-log-day",10),f(15,"pui-new-log-section",11)(16,"div",null,0),c()()),n&2&&(u(14),h("ngForOf",r.uiStateService.getLogTreeAsOrderredList()),u(),h("logsExist",r.uiStateService.logsExist()))},dependencies:[ni,si,j,I],styles:[".log_chart[_ngcontent-%COMP%]{text-align:left}.log_chart[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{border-bottom:2px solid var(--whiteLayer1)!important;font-weight:700;position:sticky;top:0;background-color:var(--bg);z-index:5}.log_chart[_ngcontent-%COMP%]   .log_day[_ngcontent-%COMP%]{width:100%;display:flex;border-bottom:1px solid var(--whiteLayer1);padding:.5em 0}.log_chart[_ngcontent-%COMP%]   .log_date[_ngcontent-%COMP%]{width:15%}.log_task[_ngcontent-%COMP%]{width:100%;transition:.2s ease-out;border-radius:.5em;padding:0 .5em}.log_day[_ngcontent-%COMP%]:not(#inputs, .header)[_ngcontent-%COMP%]   .log_task[_ngcontent-%COMP%]:hover, .log_day[_ngcontent-%COMP%]:not(#inputs, .header)[_ngcontent-%COMP%]   .log_task[_ngcontent-%COMP%]:focus-within{background-color:var(--blackLayer1);transition-delay:.2s}.days_projects[_ngcontent-%COMP%]{width:85%;display:flex;flex-direction:column}.project_row[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;border-radius:.5em;transition:.1s linear}.project_column[_ngcontent-%COMP%]{width:41.1355%;text-align:right;padding:0 .5em}.projects_tasks[_ngcontent-%COMP%]{width:58.82%}"]});let i=e;return i})();var hn=["content"];function pn(i,e){if(i&1&&(d(0,"div",2),f(1,"div",3,0),c()),i&2){let o=D();u(),_t("width",o.percent,"%")}}var li=(()=>{let e=class e{constructor(){this.percent=0,this.visible=!0}ngOnChanges(){this.percent==100&&setTimeout(()=>{this.visible=!1},2e3)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["pui-loader"]],viewQuery:function(n,r){if(n&1&&oe(hn,5),n&2){let s;se(s=ae())&&(r.content=s.first)}},inputs:{percent:"percent"},standalone:!0,features:[fe,g],decls:1,vars:1,consts:[["content",""],["class","progress_bar_container",4,"ngIf"],[1,"progress_bar_container"],[1,"progress_bar"]],template:function(n,r){n&1&&b(0,pn,3,2,"div",1),n&2&&h("ngIf",r.visible)},dependencies:[O],styles:["[_nghost-%COMP%]{width:100%}.progress_bar_container[_ngcontent-%COMP%]{width:100%;height:2px;background-color:transparent;text-align:left}.progress_bar[_ngcontent-%COMP%]{transition:.2s ease-out;background-color:var(--fg);height:100%;width:0%;left:0}"]});let i=e;return i})();var Re=function(i){return i[i.Idle=0]="Idle",i[i.Waiting=1]="Waiting",i[i.Success=2]="Success",i[i.Failure=3]="Failure",i}(Re||{});function mn(i,e){i&1&&(d(0,"li",9),K(),d(1,"svg",10),f(2,"path",11),c(),_(3," LOGS "),c())}function fn(i,e){i&1&&(d(0,"li",12),K(),d(1,"svg",13),f(2,"path",14)(3,"path",15),c(),_(4," HABITS "),c())}function gn(i,e){i&1&&(d(0,"li",16),K(),d(1,"svg",17),f(2,"path",18),c(),_(3," PROJECTS "),c())}var Ge=(()=>{let e=class e{constructor(t){this.appLoadPercent=0,this.menuVisible=!0,this.ebs=Re,this.exportButtonState=Re.Idle,this.idleTime=0,this.idleTolerance=500,this.uiStateService=t,this.idleTolerance=t.idleTolerance,this.loadStateObserver=this.uiStateService.loading$.subscribe(n=>{n!=100?this.appLoadPercent=n:setTimeout(()=>{this.appLoadPercent=n},2e3)}),mt(()=>{this.enableIdleTracking()})}enableIdleTracking(){["mousemove","mousedown","drag","keypress","scroll"].forEach(t=>{document.addEventListener(t,()=>{this.idleTime=0})}),setInterval(()=>{this.idleTime=++this.idleTime,this.idleTime>=this.idleTolerance&&this.idleTolerance>=-1&&!this.menuVisible&&(this.menuVisible=!0,console.info("MenuBar on idle"))},1e3),console.info("Idle tracking enabled")}toggleMenuBar(t=null){this.menuVisible=t??!this.menuVisible}exportData(t){this.toggleMenuBar(),this.exportButtonState=this.ebs.Waiting,this.uiStateService.exportData().then(r=>{switch(this.exportButtonState=r==!0?this.ebs.Success:this.ebs.Failure,r){case!0:this.exportButtonState=this.ebs.Success,t.title="Export Complete";break;case!1:this.exportButtonState=this.ebs.Failure,t.title="the previous export action was cancelled";break;case"noAccess":this.exportButtonState=this.ebs.Failure,t.title="proTracker doesn't have access to the file at the moment";break;case"exportException":this.exportButtonState=this.ebs.Failure,t.title="an unhandled error occurred";break;default:this.exportButtonState=this.ebs.Idle,t.title="";break}setTimeout(()=>{this.exportButtonState=this.ebs.Idle},2e3)},r=>{t.title="Fatal error",this.exportButtonState=this.ebs.Failure,console.error("Unhandled Error occurred on Data Export",r),setTimeout(()=>{this.exportButtonState=this.ebs.Idle},2e3)})}};e.\u0275fac=function(n){return new(n||e)(p(y))},e.\u0275cmp=m({type:e,selectors:[["pui-main-menu"]],standalone:!0,features:[g],decls:14,vars:7,consts:[["id","side_handle",3,"click"],["id","side_bar",3,"click"],[1,"menu","container"],[1,"menu_buttons"],["id","logChart","class","menu_button","routerLink","/logs","routerLinkActive","active",4,"ngIf"],["id","habits","class","menu_button","routerLink","/habits","routerLinkActive","active",4,"ngIf"],["id","projects","class","menu_button","routerLink","/projects","routerLinkActive","active",4,"ngIf"],[1,"menu_title",2,"display","flex"],[3,"percent"],["id","logChart","routerLink","/logs","routerLinkActive","active",1,"menu_button"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-list-ul"],["fill-rule","evenodd","d","M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"],["id","habits","routerLink","/habits","routerLinkActive","active",1,"menu_button"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-calendar3-week"],["d","M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2M1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857z"],["d","M12 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2m-5 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2m2-3a1 1 0 1 0 0-2 1 1 0 0 0 0 2m-5 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2"],["id","projects","routerLink","/projects","routerLinkActive","active",1,"menu_button"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-folder"],["d","M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"]],template:function(n,r){n&1&&(d(0,"div",0),v("click",function(){return r.toggleMenuBar()}),_(1,"..."),c(),d(2,"aside",1),v("click",function(){return r.toggleMenuBar()}),d(3,"div",2)(4,"ul",3),b(5,mn,4,0,"li",4)(6,fn,5,0,"li",5)(7,gn,4,0,"li",6),c(),d(8,"div",7)(9,"h1"),_(10,"proTracker"),c(),d(11,"p"),_(12),c(),f(13,"pui-loader",8),c()()()),n&2&&(u(2),E("side_bar_open",r.menuVisible),u(3),h("ngIf",r.appLoadPercent==100),u(),h("ngIf",r.appLoadPercent==100),u(),h("ngIf",r.appLoadPercent==100),u(5),G(r.uiStateService.appVersion),u(),h("percent",r.appLoadPercent))},dependencies:[le,Se,Ie,O,li],styles:["#side_handle[_ngcontent-%COMP%]{position:fixed;left:0;top:50%;transform:translateY(-50%) rotate(90deg);padding:0 1%;font-size:2em;cursor:pointer;-webkit-user-select:none;user-select:none;z-index:2000;transition:.25s ease-out}#side_handle[_ngcontent-%COMP%]:hover{color:var(--fg-strong);transition:.1s ease-out}#side_bar[_ngcontent-%COMP%]{transition:opacity .5s ease,visibility 0s .5s;width:100vw;height:100vh;position:fixed;top:0%;left:0vw;z-index:100;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background-color:var(--blackLayer2);display:flex;visibility:hidden;opacity:0;text-align:center;justify-content:center}#side_bar.side_bar_open[_ngcontent-%COMP%]{transition:opacity .5s ease,visibility 0s;opacity:1;visibility:visible}#side_bar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:space-between;transition:.5s ease-in-out}.menu_buttons[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.menu_button[_ngcontent-%COMP%]{text-align:left;cursor:pointer;padding:.5em 2em;border:2px solid transparent;background-color:transparent;transition:.1s ease-out,border-left 0s ease-out,color .25s ease-out;-webkit-user-select:none;user-select:none}.menu_button[_ngcontent-%COMP%]:hover, .menu_button[_ngcontent-%COMP%]:focus{border-left:2px solid var(--whiteLayer3);background-color:var(--whiteLayer1);transition:.05s ease-out,border-left 0s ease-out,opacity .5s ease,visibility 0s,display 0s;outline:none;color:var(--fg-strong)}.menu_button[_ngcontent-%COMP%]:active{border-left:2px solid green;transition:border-left none}.menu_button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .menu_button[_ngcontent-%COMP%]   .spinner-grow[_ngcontent-%COMP%]{margin-right:1em;font-size:1.25em;width:1em;height:1em;opacity:1;visibility:visible;transition:inherit,opacity .5s ease,visibility 0s,display 0s}.menu_button[_ngcontent-%COMP%]   *.hidden[_ngcontent-%COMP%]{display:none;opacity:0;visibility:hidden;transition:inherit,opacity .5s ease,visibility 0s .5s,display 0s .5s;color:transparent}.menu_button[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:var(--green)}.menu_button[_ngcontent-%COMP%]   .failure[_ngcontent-%COMP%]{color:var(--red)}.menu_title[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace;align-items:center;margin-left:auto;margin-right:auto;display:flex;flex-direction:column;text-align:center;justify-content:center}"]});let i=e;return i})();var ci=(()=>{let e=class e{constructor(t,n){this.uiStateService=t,this.router=n,this.stateObserver=this.uiStateService.stateChanged$.subscribe(r=>{this.uiStateService=r,this.task=this.uiStateService.getTask(this.taskId)})}ngOnInit(){this.task=this.uiStateService.getTask(this.taskId),this.taskStatus=this.statusId}taskEdit(t){var n=S({},this.task);n.summary=t,this.uiStateService.editTask(n)}redirectToLogs(){this.router.navigate(["/logs",{task:this.taskId}])}};e.\u0275fac=function(n){return new(n||e)(p(y),p(De))},e.\u0275cmp=m({type:e,selectors:[["pui-project-task"]],inputs:{taskId:"taskId",statusId:"statusId"},standalone:!0,features:[g],decls:2,vars:5,consts:[[3,"itemEdited","contentClicked","content"]],template:function(n,r){if(n&1&&(d(0,"li")(1,"pui-editable-item",0),v("itemEdited",function(a){return r.taskEdit(a)})("contentClicked",function(){return r.redirectToLogs()}),c()()),n&2){let s;u(),E("pending",r.taskStatus==1)("completed",r.taskStatus==4),h("content",(s=r.task==null?null:r.task.summary)!==null&&s!==void 0?s:"")}},dependencies:[A,le],styles:["[_nghost-%COMP%]{width:100%}li[_ngcontent-%COMP%]{width:100%;margin-top:4px;padding:0 0 0 1em;border-radius:0 .5em .5em 0;border-left:1px solid var(--whiteLayer2)}li[_ngcontent-%COMP%]:hover{background-color:var(--blackLayer1)}  .task_list .editable_item{padding:0 .5em}"]});let i=e;return i})();function _n(i,e){if(i&1&&f(0,"pui-project-task",5),i&2){let o=e.$implicit;h("taskId",o.key)("statusId",o.value)}}function vn(i,e){if(i&1&&(d(0,"ul",3),b(1,_n,1,2,"pui-project-task",4),H(2,"keyvalue"),c()),i&2){let o=D();u(),h("ngForOf",B(2,1,o.taskTree))}}var di=(()=>{let e=class e{constructor(t){this.uiStateService=t,this.stateObserver=this.uiStateService.stateChanged$.subscribe(n=>{this.uiStateService=n,this.project=this.uiStateService.getProject(this.projectId)})}ngOnInit(){this.project=this.uiStateService.getProject(this.projectId),this.foldedProject=this.taskTree.size==0||(this.uiStateService.foldedProjects.get(this.projectId)??!1)}foldProject(){this.foldedProject=this.uiStateService.toggleFold(this.projectId)}editProject(t){var n=S({},this.project);n.name=t,this.uiStateService.editProject(n)}};e.\u0275fac=function(n){return new(n||e)(p(y))},e.\u0275cmp=m({type:e,selectors:[["pui-project-item"]],inputs:{projectId:"projectId",taskTree:"taskTree"},standalone:!0,features:[g],decls:4,vars:2,consts:[[1,"projectHeader"],[3,"contentClicked","itemEdited","content"],["class","task_list",4,"ngIf"],[1,"task_list"],["class","project_task",3,"taskId","statusId",4,"ngFor","ngForOf"],[1,"project_task",3,"taskId","statusId"]],template:function(n,r){if(n&1&&(d(0,"li")(1,"h3",0)(2,"pui-editable-item",1),v("contentClicked",function(){return r.foldProject()})("itemEdited",function(a){return r.editProject(a)}),c()(),b(3,vn,3,3,"ul",2),c()),n&2){let s;u(2),h("content",(s=r.project==null?null:r.project.name)!==null&&s!==void 0?s:"ERROR"),u(),h("ngIf",!r.foldedProject)}},dependencies:[A,ci,I,j,O,q],styles:[".task_list[_ngcontent-%COMP%]{transition:.5s;list-style-type:none;padding:0;margin:0;display:flex;flex-wrap:wrap;justify-content:flex-start}.project_task[_ngcontent-%COMP%]{cursor:pointer}.empty_project.task_list[_ngcontent-%COMP%]{display:none}  li h3{margin:0}  li h3 .editable_item_content{cursor:pointer}[_nghost-%COMP%]{margin:.5em .5em 0 0;padding:.5em 1em;border-radius:.5em;width:100%}"]});let i=e;return i})();var yn=()=>["/logs"];function bn(i,e){if(i&1&&f(0,"pui-project-item",6),i&2){let o=e.$implicit;h("projectId",o[0])("taskTree",o[1])}}function Cn(i,e){if(i&1&&(d(0,"main",3)(1,"h1"),_(2,"PROJECTS"),c(),d(3,"div")(4,"ul",4),b(5,bn,1,2,"pui-project-item",5),c()()()),i&2){let o=D();u(5),h("ngForOf",o.sortedProjects)}}function wn(i,e){i&1&&(d(0,"main",7)(1,"h1"),_(2,"PROJECTS"),c(),d(3,"p"),_(4," It looks like you haven't set up a project."),f(5,"br"),_(6," Checkout the "),d(7,"a",8),_(8,"Logs tab"),c(),_(9," to add a new Project with a task "),c()()),i&2&&(u(7),h("routerLink",yt(1,yn)))}var ui=(()=>{let e=class e{constructor(t){this.uiStateService=t,this.stateObserver=this.uiStateService.stateChanged$.subscribe(n=>{this.uiStateService=n,this.sortProjects()})}ngOnInit(){this.sortProjects(),setTimeout(()=>{this.sortProjects()})}sortProjects(){var t=this.uiStateService.getProjectTree().entries(),n=Array.from(t);n.sort((r,s)=>{let a=this.uiStateService.getProject(r[0]),l=this.uiStateService.getProject(s[0]);return a.name.localeCompare(l.name)??0}),this.sortedProjects=n}};e.\u0275fac=function(n){return new(n||e)(p(y))},e.\u0275cmp=m({type:e,selectors:[["pui-tabs-project"]],standalone:!0,features:[g],decls:3,vars:2,consts:[[1,"menu_tab","projectTab"],["class","container",4,"ngIf"],["class","no_projects",4,"ngIf"],[1,"container"],["id","project_list"],[3,"projectId","taskTree",4,"ngFor","ngForOf"],[3,"projectId","taskTree"],[1,"no_projects"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(n,r){if(n&1&&(d(0,"div",0),b(1,Cn,6,1,"main",1)(2,wn,10,2,"main",2),c()),n&2){let s,a;u(),h("ngIf",(s=r.sortedProjects.length>0)!==null&&s!==void 0?s:!1),u(),h("ngIf",(a=r.sortedProjects.length<=0)!==null&&a!==void 0?a:!0)}},dependencies:[di,j,I,O,le,Se,Ie],styles:["#project_list[_ngcontent-%COMP%]{transition:.5s;list-style-type:none;padding:0;margin:0;display:flex;flex-wrap:wrap;justify-content:flex-start}.no_projects[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;text-align:center;justify-content:center}"]});let i=e;return i})();var Mn=()=>[import("./chunk-IC4XZRZB.mjs").then(i=>i.RouterOutlet)];function Vn(i,e){i&1&&f(0,"router-outlet")}var hi=(()=>{let e=class e{constructor(t){this.title="pUIng",this.logsTab=ee.TaskLogs,this.habitsTab=ee.Habits,this.projectsTab=ee.Projects,this.uiStateService=t}ngOnInit(){setTimeout(()=>{this.uiStateService.loadData()})}};e.\u0275fac=function(n){return new(n||e)(p(y))},e.\u0275cmp=m({type:e,selectors:[["app-root"]],standalone:!0,features:[g],decls:4,vars:0,template:function(n,r){n&1&&(f(0,"pui-main-menu"),b(1,Vn,1,0),ft(2,1,Mn),gt())},dependencies:[Ge,I]});let i=e;return i})();var pi=[{path:"menu",title:"mainmenu",component:Ge},{path:"logs",title:"proTracker | Logs",component:ai},{path:"habits",title:"proTracker | Habits",component:ti},{path:"projects",title:"proTracker | Projects",component:ui},{path:"",redirectTo:"/logs",pathMatch:"full"}];var mi={providers:[y,St(pi,It()),Vt()]};var Dn={providers:[Dt()]},fi=wt(mi,Dn);var Sn=()=>Mt(hi,fi),is=Sn;export{is as a};
